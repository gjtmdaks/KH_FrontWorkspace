<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body style="margin: 0; font-family: 'consolas'; line-height: 85%;
letter-spacing: 2px; font-size: 10px;">
    <!-- 
        아스키 아트(구름아트) 만드는 방법

        1. 사진을 준비한다.(변환시키고 싶은 데이터)
        2. 사진을 흑백처리한다.(각 픽셀의 rgb값을 특정 수식에 대입하면 밝기 수치를 구할 수 있다.(0~255))
        3. 사진의 픽셀을 순회하며 명암에 따라 아스키 문자로 치환한다.(0~20 = @, 20~40 = $, ...)
    -->

    <canvas id="canvas" width="225" height="225"></canvas>
    <h4></h4>

    <script>
        let img = new Image()
        img.src = 'doro.jpg'
        let canvas = document.querySelector('#canvas')
        let ctx = canvas.getContext('2d')
        let ascii = '@$#Y!=+~- '

        img.addEventListener('load', function(){
            ctx.drawImage(img, 0, 0)
            for(let i=0; i<225; i+=3){
                document.querySelector('h4').innerHTML += '<br>'
                for(let j=0; j<225; j+=3){
                    let pixel = ctx.getImageData(j,i,1,1).data
                    let gray = 0.299*pixel[0] + 0.587*pixel[1]  + 0.114*pixel[2] 
                    let index = Math.floor(gray/25.6)

                    document.querySelector('h4').innerText += ascii[index]
                }
            }
        })
    </script>
</body>
</html>